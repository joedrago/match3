(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Match;

Match = (function() {
  function Match() {
    this.game = new Phaser.Game("100%", "100%", Phaser.CANVAS, 'phaser-example', {
      preload: (function(_this) {
        return function() {
          return _this.preload();
        };
      })(this),
      create: (function(_this) {
        return function() {
          return _this.create();
        };
      })(this),
      update: (function(_this) {
        return function() {
          return _this.update();
        };
      })(this)
    });
    this.gridCX = 8;
    this.gridCY = 7;
  }

  Match.prototype.preload = function() {
    console.log("Match.preload()");
    return this.game.load.spritesheet('gems', 'img/gems.png', 80, 80, -1, 4, 4);
  };

  Match.prototype.create = function() {
    console.log("Match.create(): " + window.innerWidth + "x" + window.innerHeight);
    this.screenW = window.innerWidth;
    this.screenH = window.innerHeight;
    if (this.screenW > this.screenH) {
      this.screenW = Math.floor(this.screenH / 16 * 9);
    }
    console.log("created screen " + this.screenW + "x" + this.screenH);
    this.gemSize = this.screenW / this.gridCX;
    this.gridW = this.gemSize * this.gridCX;
    this.gridH = this.gemSize * this.gridCY;
    this.gridX = 0;
    this.gridY = ((this.screenH - (this.gemSize * this.gridCY)) - this.gemSize) >> 1;
    this.game.input.onDown.add((function(_this) {
      return function(p) {
        return _this.onDown(p);
      };
    })(this));
    this.game.input.onUp.add((function(_this) {
      return function(p) {
        return _this.onUp(p);
      };
    })(this));
    return this.newGame();
  };

  Match.prototype.newGame = function() {
    var i, j, k, l, m, n, ref, ref1, ref2, ref3;
    if (this.grid) {
      for (i = k = 0, ref = this.gridCX; 0 <= ref ? k < ref : k > ref; i = 0 <= ref ? ++k : --k) {
        for (j = l = 0, ref1 = this.gridCY; 0 <= ref1 ? l < ref1 : l > ref1; j = 0 <= ref1 ? ++l : --l) {
          if (this.grid[i][j]) {
            this.grid[i][j].sprite.destroy();
          }
        }
      }
    }
    this.grid = Array(this.gridCX);
    for (i = m = 0, ref2 = this.gridCX; 0 <= ref2 ? m < ref2 : m > ref2; i = 0 <= ref2 ? ++m : --m) {
      this.grid[i] = Array(this.gridCY);
      for (j = n = 0, ref3 = this.gridCY; 0 <= ref3 ? n < ref3 : n > ref3; j = 0 <= ref3 ? ++n : --n) {
        this.grid[i][j] = null;
      }
    }
    return this.spawnGems();
  };

  Match.prototype.update = function() {};

  Match.prototype.screenToGrid = function(x, y) {
    var g;
    g = {
      x: Math.floor((x - this.gridX) / this.gemSize),
      y: Math.floor((y - this.gridY) / this.gemSize)
    };
    if ((g.x < 0) || (g.x >= this.gridCX) || (g.y < 0) || (g.y >= this.gridCY)) {
      return null;
    }
    return g;
  };

  Match.prototype.gridToScreen = function(x, y) {
    var p;
    console.log;
    p = {
      x: Math.floor(x * this.gemSize) + this.gridX,
      y: Math.floor(y * this.gemSize) + this.gridY
    };
    return p;
  };

  Match.prototype.onDown = function(p) {
    var g;
    g = this.screenToGrid(p.x, p.y);
    if (g !== null) {
      this.emitScoreParticle(g.x, g.y, 0, 100);
      this.breakGem(g.x, g.y);
      return this.spawnGems();
    } else {
      return console.log("bad coord");
    }
  };

  Match.prototype.onUp = function(p) {};

  Match.prototype.breakGem = function(x, y) {
    console.log("breakGem(" + x + ", " + y + ")");
    if (this.grid[x][y] !== null) {
      this.grid[x][y].sprite.destroy();
      this.grid[x][y] = null;
    }
    if ((x > 0) && (this.grid[x - 1][y] !== null)) {
      this.grid[x - 1][y].sprite.destroy();
      this.grid[x - 1][y] = null;
    }
    if ((x < this.gridCX - 1) && (this.grid[x + 1][y] !== null)) {
      this.grid[x + 1][y].sprite.destroy();
      return this.grid[x + 1][y] = null;
    }
  };

  Match.prototype.gemArtIndex = function(type, highlight, power) {
    var index;
    if (highlight == null) {
      highlight = false;
    }
    if (power == null) {
      power = 0;
    }
    index = (function() {
      switch (type) {
        case 0:
        case 1:
        case 2:
        case 3:
        case 4:
          return type;
        case 5:
        case 6:
        case 7:
          return 7 + (3 * (type - 5));
      }
    })();
    if (highlight) {
      index += 16;
    }
    index += power;
    return index;
  };

  Match.prototype.emitScoreParticle = function(gridX, gridY, type, score) {
    var p, style, text;
    p = this.gridToScreen(gridX, gridY);
    style = {
      font: "bold 16px Arial",
      fill: "#fff",
      boundsAlignH: "center",
      boundsAlignV: "middle"
    };
    text = this.game.add.text(p.x, p.y, "" + score, style);
    text.setShadow(3, 3, 'rgba(0,0,0,0.5)', 2);
    text.setTextBounds(0, 0, this.gemSize, this.gemSize);
    this.game.add.tween(text).to({
      y: p.y - (this.gemSize / 4),
      alpha: 0
    }, 1000, Phaser.Easing.Quartic.In, true);
    this.game.add.tween(text.scale).to({
      x: 2,
      y: 2
    }, 1000, Phaser.Easing.Linear.None, true);
    return this.game.time.events.add(1000, function() {
      return text.destroy();
    });
  };

  Match.prototype.bestGemToSpawn = function() {
    return Math.floor(Math.random() * 8);
  };

  Match.prototype.spawnGems = function() {
    var gem, gemType, i, j, k, l, m, n, newGrid, newIndex, oldIndex, ref, ref1, ref2, ref3, results, sprite, x, y;
    newGrid = Array(this.gridCX);
    for (i = k = 0, ref = this.gridCX; 0 <= ref ? k < ref : k > ref; i = 0 <= ref ? ++k : --k) {
      newGrid[i] = Array(this.gridCY);
      oldIndex = newIndex = this.gridCY - 1;
      while (oldIndex >= 0) {
        if (this.grid[i][oldIndex] !== null) {
          newGrid[i][newIndex] = this.grid[i][oldIndex];
          newIndex -= 1;
        }
        oldIndex -= 1;
      }
      while (newIndex >= 0) {
        newGrid[i][newIndex] = null;
        newIndex -= 1;
      }
    }
    this.grid = newGrid;
    for (i = l = 0, ref1 = this.gridCX; 0 <= ref1 ? l < ref1 : l > ref1; i = 0 <= ref1 ? ++l : --l) {
      for (j = m = 0, ref2 = this.gridCY; 0 <= ref2 ? m < ref2 : m > ref2; j = 0 <= ref2 ? ++m : --m) {
        gem = this.grid[i][j];
        if (gem === null) {
          continue;
        }
        if ((gem.x !== i) || (gem.y !== j)) {
          x = this.gridX + (i * this.gemSize);
          y = this.gridY + (j * this.gemSize);
          this.game.add.tween(gem.sprite).to({
            x: x,
            y: y
          }, 400, Phaser.Easing.Bounce.Out, true);
          gem.x = i;
          gem.y = j;
        }
      }
    }
    results = [];
    for (i = n = 0, ref3 = this.gridCX; 0 <= ref3 ? n < ref3 : n > ref3; i = 0 <= ref3 ? ++n : --n) {
      results.push((function() {
        var o, ref4, results1;
        results1 = [];
        for (j = o = 0, ref4 = this.gridCY; 0 <= ref4 ? o < ref4 : o > ref4; j = 0 <= ref4 ? ++o : --o) {
          if (this.grid[i][j] === null) {
            gemType = this.bestGemToSpawn();
            x = this.gridX + (i * this.gemSize);
            y = this.gridY + (j * this.gemSize);
            sprite = this.game.add.sprite(x, y - this.gridH, 'gems', this.gemArtIndex(gemType, false));
            sprite.width = this.gemSize;
            sprite.height = this.gemSize;
            this.game.world.sendToBack(sprite);
            this.game.add.tween(sprite).to({
              y: y
            }, 400, Phaser.Easing.Bounce.Out, true);
            results1.push(this.grid[i][j] = {
              x: i,
              y: j,
              type: gemType,
              sprite: sprite
            });
          } else {
            results1.push(void 0);
          }
        }
        return results1;
      }).call(this));
    }
    return results;
  };

  return Match;

})();

module.exports = Match;


},{}],2:[function(require,module,exports){
var Match, init, onDeviceReady;

Match = require('./Match');

onDeviceReady = function() {
  console.log('deviceready');
  return window.match = new Match;
};

init = function() {
  console.log("init");
  return document.addEventListener('deviceready', onDeviceReady, false);
};

init();


},{"./Match":1}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJ3d3dcXHNyY1xcTWF0Y2guY29mZmVlIiwid3d3XFxzcmNcXG1haW4uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsSUFBQTs7QUFBTTtFQUNTLGVBQUE7SUFDWCxJQUFDLENBQUEsSUFBRCxHQUFZLElBQUEsTUFBTSxDQUFDLElBQVAsQ0FBWSxNQUFaLEVBQW9CLE1BQXBCLEVBQTRCLE1BQU0sQ0FBQyxNQUFuQyxFQUEyQyxnQkFBM0MsRUFBNkQ7TUFDdkUsT0FBQSxFQUFTLENBQUEsU0FBQSxLQUFBO2VBQUEsU0FBQTtpQkFBRyxLQUFDLENBQUEsT0FBRCxDQUFBO1FBQUg7TUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBRDhEO01BRXZFLE1BQUEsRUFBUyxDQUFBLFNBQUEsS0FBQTtlQUFBLFNBQUE7aUJBQUcsS0FBQyxDQUFBLE1BQUQsQ0FBQTtRQUFIO01BQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUY4RDtNQUd2RSxNQUFBLEVBQVMsQ0FBQSxTQUFBLEtBQUE7ZUFBQSxTQUFBO2lCQUFHLEtBQUMsQ0FBQSxNQUFELENBQUE7UUFBSDtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FIOEQ7S0FBN0Q7SUFPWixJQUFDLENBQUEsTUFBRCxHQUFVO0lBQ1YsSUFBQyxDQUFBLE1BQUQsR0FBVTtFQVRDOztrQkFXYixPQUFBLEdBQVMsU0FBQTtJQUNQLE9BQU8sQ0FBQyxHQUFSLENBQVksaUJBQVo7V0FDQSxJQUFDLENBQUEsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFYLENBQXVCLE1BQXZCLEVBQStCLGNBQS9CLEVBQStDLEVBQS9DLEVBQW1ELEVBQW5ELEVBQXVELENBQUMsQ0FBeEQsRUFBMkQsQ0FBM0QsRUFBOEQsQ0FBOUQ7RUFGTzs7a0JBSVQsTUFBQSxHQUFRLFNBQUE7SUFDTixPQUFPLENBQUMsR0FBUixDQUFZLGtCQUFBLEdBQW1CLE1BQU0sQ0FB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QTtFQUNkLE9BQU8sQ0FBQyxHQUFSLENBQVksYUFBWjtTQUNBLE1BQU0sQ0FBQyxLQUFQLEdBQWUsSUFBSTtBQUZMOztBQUloQixJQUFBLEdBQU8sU0FBQTtFQUNMLE9BQU8sQ0FBQyxHQUFSLENBQVksTUFBWjtTQUNBLFFBQVEsQ0FBQyxnQkFBVCxDQUEwQixhQUExQixFQUF5QyxhQUF6QyxFQUF3RCxLQUF4RDtBQUZLOztBQUlQLElBQUEsQ0FBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJjbGFzcyBNYXRjaFxyXG4gIGNvbnN0cnVjdG9yOiAtPlxyXG4gICAgQGdhbWUgPSBuZXcgUGhhc2VyLkdhbWUgXCIxMDAlXCIsIFwiMTAwJVwiLCBQaGFzZXIuQ0FOVkFTLCAncGhhc2VyLWV4YW1wbGUnLCB7XHJcbiAgICAgIHByZWxvYWQ6ID0+IEBwcmVsb2FkKClcclxuICAgICAgY3JlYXRlOiAgPT4gQGNyZWF0ZSgpXHJcbiAgICAgIHVwZGF0ZTogID0+IEB1cGRhdGUoKVxyXG4gICAgfVxyXG5cclxuICAgICMgR3JpZCBnZW0gY291bnRzXHJcbiAgICBAZ3JpZENYID0gOFxyXG4gICAgQGdyaWRDWSA9IDdcclxuXHJcbiAgcHJlbG9hZDogLT5cclxuICAgIGNvbnNvbGUubG9nIFwiTWF0Y2gucHJlbG9hZCgpXCJcclxuICAgIEBnYW1lLmxvYWQuc3ByaXRlc2hlZXQoJ2dlbXMnLCAnaW1nL2dlbXMucG5nJywgODAsIDgwLCAtMSwgNCwgNClcclxuXHJcbiAgY3JlYXRlOiAtPlxyXG4gICAgY29uc29sZS5sb2cgXCJNYXRjaC5jcmVhdGUoKTogI3t3aW5kb3cuaW5uZXJXaWR0aH14I3t3aW5kb3cuaW5uZXJIZWlnaHR9XCJcclxuICAgIEBzY3JlZW5XID0gd2luZG93LmlubmVyV2lkdGhcclxuICAgIEBzY3JlZW5IID0gd2luZG93LmlubmVySGVpZ2h0XHJcbiAgICBpZiBAc2NyZWVuVyA+IEBzY3JlZW5IXHJcbiAgICAgIEBzY3JlZW5XID0gTWF0aC5mbG9vcihAc2NyZWVuSCAvIDE2ICogOSlcclxuICAgIGNvbnNvbGUubG9nIFwiY3JlYXRlZCBzY3JlZW4gI3tAc2NyZWVuV314I3tAc2NyZWVuSH1cIlxyXG5cclxuICAgIEBnZW1TaXplID0gQHNjcmVlblcgLyBAZ3JpZENYXHJcbiAgICBAZ3JpZFcgPSBAZ2VtU2l6ZSAqIEBncmlkQ1hcclxuICAgIEBncmlkSCA9IEBnZW1TaXplICogQGdyaWRDWVxyXG4gICAgQGdyaWRYID0gMFxyXG4gICAgQGdyaWRZID0gKChAc2NyZWVuSCAtIChAZ2VtU2l6ZSAqIEBncmlkQ1kpKSAtIEBnZW1TaXplKSA+PiAxXHJcblxyXG4gICAgQGdhbWUuaW5wdXQub25Eb3duLmFkZCAocCkgPT4gQG9uRG93bihwKVxyXG4gICAgQGdhbWUuaW5wdXQub25VcC5hZGQgKHApID0+IEBvblVwKHApXHJcblxyXG4gICAgQG5ld0dhbWUoKVxyXG5cclxuICBuZXdHYW1lOiAtPlxyXG4gICAgaWYgQGdyaWRcclxuICAgICAgZm9yIGkgaW4gWzAuLi5AZ3JpZENYXVxyXG4gICAgICAgIGZvciBqIGluIFswLi4uQGdyaWRDWV1cclxuICAgICAgICAgIGlmIEBncmlkW2ldW2pdXHJcbiAgICAgICAgICAgIEBncmlkW2ldW2pdLnNwcml0ZS5kZXN0cm95KClcclxuXHJcbiAgICBAZ3JpZCA9IEFycmF5KEBncmlkQ1gpXHJcbiAgICBmb3IgaSBpbiBbMC4uLkBncmlkQ1hdXHJcbiAgICAgIEBncmlkW2ldID0gQXJyYXkoQGdyaWRDWSlcclxuICAgICAgZm9yIGogaW4gWzAuLi5AZ3JpZENZXVxyXG4gICAgICAgIEBncmlkW2ldW2pdID0gbnVsbFxyXG4gICAgQHNwYXduR2VtcygpXHJcblxyXG4gIHVwZGF0ZTogLT5cclxuXHJcbiAgc2NyZWVuVG9HcmlkOiAoeCwgeSkgLT5cclxuICAgIGcgPVxyXG4gICAgICB4OiBNYXRoLmZsb29yKCh4IC0gQGdyaWRYKSAvIEBnZW1TaXplKVxyXG4gICAgICB5OiBNYXRoLmZsb29yKCh5IC0gQGdyaWRZKSAvIEBnZW1TaXplKVxyXG4gICAgaWYgKGcueCA8IDApIG9yIChnLnggPj0gQGdyaWRDWCkgb3IgKGcueSA8IDApIG9yIChnLnkgPj0gQGdyaWRDWSlcclxuICAgICAgcmV0dXJuIG51bGxcclxuICAgIHJldHVybiBnXHJcblxyXG4gIGdyaWRUb1NjcmVlbjogKHgsIHkpIC0+XHJcbiAgICBjb25zb2xlLmxvZ1xyXG4gICAgcCA9XHJcbiAgICAgIHg6IE1hdGguZmxvb3IoeCAqIEBnZW1TaXplKSArIEBncmlkWFxyXG4gICAgICB5OiBNYXRoLmZsb29yKHkgKiBAZ2VtU2l6ZSkgKyBAZ3JpZFlcclxuICAgIHJldHVybiBwXHJcblxyXG4gIG9uRG93bjogKHApIC0+XHJcbiAgICAjIGNvbnNvbGUubG9nIFwiZG93blwiLCBbcC54LHAueSxwLnNjcmVlblgscC5zY3JlZW5ZXVxyXG4gICAgZyA9IEBzY3JlZW5Ub0dyaWQocC54LCBwLnkpXHJcbiAgICBpZiBnICE9IG51bGxcclxuICAgICAgQGVtaXRTY29yZVBhcnRpY2xlKGcueCwgZy55LCAwLCAxMDApXHJcbiAgICAgIEBicmVha0dlbShnLngsIGcueSlcclxuICAgICAgQHNwYXduR2VtcygpXHJcbiAgICBlbHNlXHJcbiAgICAgIGNvbnNvbGUubG9nIFwiYmFkIGNvb3JkXCJcclxuICAgICMgQG5ld0dhbWUoKVxyXG5cclxuICBvblVwOiAocCkgLT5cclxuICAgICMgY29uc29sZS5sb2cgXCJ1cFwiLCBbcC54LHAueSxwLnNjcmVlblgscC5zY3JlZW5ZXVxyXG5cclxuICBicmVha0dlbTogKHgsIHkpIC0+XHJcbiAgICBjb25zb2xlLmxvZyBcImJyZWFrR2VtKCN7eH0sICN7eX0pXCJcclxuICAgIGlmIEBncmlkW3hdW3ldICE9IG51bGxcclxuICAgICAgQGdyaWRbeF1beV0uc3ByaXRlLmRlc3Ryb3koKVxyXG4gICAgICBAZ3JpZFt4XVt5XSA9IG51bGxcclxuICAgIGlmICh4ID4gMCkgYW5kIChAZ3JpZFt4LTFdW3ldICE9IG51bGwpXHJcbiAgICAgIEBncmlkW3gtMV1beV0uc3ByaXRlLmRlc3Ryb3koKVxyXG4gICAgICBAZ3JpZFt4LTFdW3ldID0gbnVsbFxyXG4gICAgaWYgKHggPCBAZ3JpZENYLTEpIGFuZCAoQGdyaWRbeCsxXVt5XSAhPSBudWxsKVxyXG4gICAgICBAZ3JpZFt4KzFdW3ldLnNwcml0ZS5kZXN0cm95KClcclxuICAgICAgQGdyaWRbeCsxXVt5XSA9IG51bGxcclxuXHJcbiAgZ2VtQXJ0SW5kZXg6ICh0eXBlLCBoaWdobGlnaHQ9ZmFsc2UsIHBvd2VyPTApIC0+XHJcbiAgICBpbmRleCA9IHN3aXRjaCB0eXBlXHJcbiAgICAgIHdoZW4gMCwgMSwgMiwgMywgNFxyXG4gICAgICAgIHR5cGVcclxuICAgICAgd2hlbiA1LCA2LCA3XHJcbiAgICAgICAgNyArICgzICogKHR5cGUgLSA1KSlcclxuICAgIGlmIGhpZ2hsaWdodFxyXG4gICAgICBpbmRleCArPSAxNlxyXG4gICAgaW5kZXggKz0gcG93ZXJcclxuICAgIHJldHVybiBpbmRleFxyXG5cclxuICBlbWl0U2NvcmVQYXJ0aWNsZTogKGdyaWRYLCBncmlkWSwgdHlwZSwgc2NvcmUpIC0+XHJcbiAgICBwID0gQGdyaWRUb1NjcmVlbihncmlkWCwgZ3JpZFkpXHJcbiAgICBzdHlsZSA9IHsgZm9udDogXCJib2xkIDE2cHggQXJpYWxcIiwgZmlsbDogXCIjZmZmXCIsIGJvdW5kc0FsaWduSDogXCJjZW50ZXJcIiwgYm91bmRzQWxpZ25WOiBcIm1pZGRsZVwiIH1cclxuICAgIHRleHQgPSBAZ2FtZS5hZGQudGV4dChwLngsIHAueSwgXCJcIitzY29yZSwgc3R5bGUpXHJcbiAgICB0ZXh0LnNldFNoYWRvdygzLCAzLCAncmdiYSgwLDAsMCwwLjUpJywgMilcclxuICAgIHRleHQuc2V0VGV4dEJvdW5kcygwLCAwLCBAZ2VtU2l6ZSwgQGdlbVNpemUpO1xyXG4gICAgQGdhbWUuYWRkLnR3ZWVuKHRleHQpLnRvKHsgeTogcC55IC0gKEBnZW1TaXplIC8gNCksIGFscGhhOiAwIH0sIDEwMDAsIFBoYXNlci5FYXNpbmcuUXVhcnRpYy5JbiwgdHJ1ZSlcclxuICAgIEBnYW1lLmFkZC50d2Vlbih0ZXh0LnNjYWxlKS50byh7IHg6IDIsIHk6IDIgfSwgMTAwMCwgUGhhc2VyLkVhc2luZy5MaW5lYXIuTm9uZSwgdHJ1ZSlcclxuICAgIEBnYW1lLnRpbWUuZXZlbnRzLmFkZCAxMDAwLCAtPlxyXG4gICAgICB0ZXh0LmRlc3Ryb3koKVxyXG5cclxuICBiZXN0R2VtVG9TcGF3bjogLT5cclxuICAgICMgVE9ETzogRGVjaWRlIGJhc2VkIG9uIGN1cnJlbnQgZ2VtIGRpc3RyaWJ1dGlvblxyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDgpXHJcblxyXG4gIHNwYXduR2VtczogLT5cclxuICAgICMgZHJvcCBnZW1zIGZyb20gaGlnaGVyIHVwIHNsb3RzIGRvd25cclxuICAgIG5ld0dyaWQgPSBBcnJheShAZ3JpZENYKVxyXG4gICAgZm9yIGkgaW4gWzAuLi5AZ3JpZENYXVxyXG4gICAgICBuZXdHcmlkW2ldID0gQXJyYXkoQGdyaWRDWSlcclxuICAgICAgb2xkSW5kZXggPSBuZXdJbmRleCA9IEBncmlkQ1kgLSAxXHJcbiAgICAgIHdoaWxlIG9sZEluZGV4ID49IDBcclxuICAgICAgICBpZiBAZ3JpZFtpXVtvbGRJbmRleF0gIT0gbnVsbFxyXG4gICAgICAgICAgbmV3R3JpZFtpXVtuZXdJbmRleF0gPSBAZ3JpZFtpXVtvbGRJbmRleF1cclxuICAgICAgICAgIG5ld0luZGV4IC09IDFcclxuICAgICAgICBvbGRJbmRleCAtPSAxXHJcbiAgICAgIHdoaWxlIG5ld0luZGV4ID49IDBcclxuICAgICAgICBuZXdHcmlkW2ldW25ld0luZGV4XSA9IG51bGxcclxuICAgICAgICBuZXdJbmRleCAtPSAxXHJcbiAgICBAZ3JpZCA9IG5ld0dyaWRcclxuXHJcbiAgICAjIHVwZGF0ZSBzcHJpdGVzIGFuZCB4L3lcclxuICAgIGZvciBpIGluIFswLi4uQGdyaWRDWF1cclxuICAgICAgZm9yIGogaW4gWzAuLi5AZ3JpZENZXVxyXG4gICAgICAgIGdlbSA9IEBncmlkW2ldW2pdXHJcbiAgICAgICAgaWYgZ2VtID09IG51bGxcclxuICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgaWYgKGdlbS54ICE9IGkpIG9yIChnZW0ueSAhPSBqKVxyXG4gICAgICAgICAgeCA9IEBncmlkWCArIChpICogQGdlbVNpemUpXHJcbiAgICAgICAgICB5ID0gQGdyaWRZICsgKGogKiBAZ2VtU2l6ZSlcclxuICAgICAgICAgIEBnYW1lLmFkZC50d2VlbihnZW0uc3ByaXRlKS50byh7IHg6IHgsIHk6IHkgfSwgNDAwLCBQaGFzZXIuRWFzaW5nLkJvdW5jZS5PdXQsIHRydWUpXHJcbiAgICAgICAgICBnZW0ueCA9IGlcclxuICAgICAgICAgIGdlbS55ID0galxyXG5cclxuICAgICMgZHJvcCBmcm9tIHRoZSB0b3BcclxuICAgIGZvciBpIGluIFswLi4uQGdyaWRDWF1cclxuICAgICAgZm9yIGogaW4gWzAuLi5AZ3JpZENZXVxyXG4gICAgICAgIGlmIEBncmlkW2ldW2pdID09IG51bGxcclxuICAgICAgICAgIGdlbVR5cGUgPSBAYmVzdEdlbVRvU3Bhd24oKVxyXG4gICAgICAgICAgeCA9IEBncmlkWCArIChpICogQGdlbVNpemUpXHJcbiAgICAgICAgICB5ID0gQGdyaWRZICsgKGogKiBAZ2VtU2l6ZSlcclxuICAgICAgICAgIHNwcml0ZSA9IEBnYW1lLmFkZC5zcHJpdGUoeCwgeSAtIEBncmlkSCwgJ2dlbXMnLCBAZ2VtQXJ0SW5kZXgoZ2VtVHlwZSwgZmFsc2UpKVxyXG4gICAgICAgICAgc3ByaXRlLndpZHRoID0gQGdlbVNpemVcclxuICAgICAgICAgIHNwcml0ZS5oZWlnaHQgPSBAZ2VtU2l6ZVxyXG4gICAgICAgICAgQGdhbWUud29ybGQuc2VuZFRvQmFjayhzcHJpdGUpXHJcbiAgICAgICAgICBAZ2FtZS5hZGQudHdlZW4oc3ByaXRlKS50byh7IHk6IHkgfSwgNDAwLCBQaGFzZXIuRWFzaW5nLkJvdW5jZS5PdXQsIHRydWUpXHJcbiAgICAgICAgICBAZ3JpZFtpXVtqXSA9XHJcbiAgICAgICAgICAgIHg6IGlcclxuICAgICAgICAgICAgeTogalxyXG4gICAgICAgICAgICB0eXBlOiBnZW1UeXBlXHJcbiAgICAgICAgICAgIHNwcml0ZTogc3ByaXRlXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1hdGNoXHJcbiIsIk1hdGNoID0gcmVxdWlyZSAnLi9NYXRjaCdcclxuXHJcbm9uRGV2aWNlUmVhZHkgPSAtPlxyXG4gIGNvbnNvbGUubG9nKCdkZXZpY2VyZWFkeScpXHJcbiAgd2luZG93Lm1hdGNoID0gbmV3IE1hdGNoXHJcblxyXG5pbml0ID0gLT5cclxuICBjb25zb2xlLmxvZyBcImluaXRcIlxyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZXJlYWR5Jywgb25EZXZpY2VSZWFkeSwgZmFsc2UpXHJcblxyXG5pbml0KClcclxuIl19
